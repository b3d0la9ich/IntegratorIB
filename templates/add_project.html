<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Добавить проект</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='add_project.css') }}">
</head>
<body>
    <header class="header">
        <div class="container">
            <h1>Добавление проекта</h1>
            <nav>
                <a href="{{ url_for('list_projects', client_id=client_id) }}">← Назад к проектам</a>
            </nav>
        </div>
    </header>

    <main class="container">
        <form method="POST" class="form-card">
            <input type="text" name="name" placeholder="Название проекта" required>

            <label>Дата начала:</label>
            <input type="date" id="start_date" name="start_date" required min="{{ current_date }}">

            <label>Дата окончания:</label>
            <input type="date" id="end_date" name="end_date">

            <label>Ответственный сотрудник:</label>
            <select name="user_id" required>
                {% for user in users %}
                    <option value="{{ user.id }}">{{ user.username }}{% if user.is_admin %} (админ){% endif %}</option>
                {% endfor %}
            </select>

            <button type="submit">Сохранить</button>
        </form>
    </main>

    <script>
    document.addEventListener("DOMContentLoaded", function () {
        const startDate = document.getElementById("start_date");
        const endDate = document.getElementById("end_date");

        startDate.addEventListener("change", function () {
            if (startDate.value) {
                let start = new Date(startDate.value);
                start.setDate(start.getDate() + 1); // минимум завтра
                const minEnd = start.toISOString().split("T")[0];
                endDate.min = minEnd;
            } else {
                endDate.removeAttribute("min");
            }
        });
    });
    </script>
</body>
</html>
